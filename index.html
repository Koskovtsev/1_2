<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            max-width: 1440px;
            width: 100%;
            margin: 100px auto;
        }

        button {
            margin: 10px;
        }

        .main {
            display: flex;
            align-items: center;
            flex-direction: column;
            gap: 10px;
            position: relative;
        }

        .hidden {
            display: none;
        }

        .div_wrapper {
            display: flex;
            width: 800px;
            padding-left: 250px;
            height: 120px;
            margin: 20px;
        }

        #test__black_block {
            height: 100px;
            width: 100px;
            margin: 5px;
            background-color: #000;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
        }

        .yellow_box {
            width: 100px;
            height: 100px;
            background-color: yellow;
        }

        .test__red_block_hover {
            display: none;
            width: 50px;
            height: 50px;
            background-color: red;
            margin: auto 5px;
        }

        .test__green_block_input {
            display: none;
            width: 50px;
            height: 20px;
            background-color: green;
            margin: auto 5px;
        }

        .mouse_coordinates {
            padding-left: 80%;
        }

        .to_up_btn {
            display: none;
            position: absolute;
            top: 90%;
            right: 10%;
            width: 100px;
            height: 30px;
        }

        .alert_block {
            width: 200px;
            height: 200px;
            background-color: #aaa;
        }

        .inner_alert_block {
            width: 100px;
            height: 100px;
            background-color: #00ff00;
            margin: 25% auto;
        }

        .advertising {
            display: none;
            background-color: gray;
            position: fixed;
            top: -10%;
            opacity: 0.5;
            width: 100vw;
            height: 200%;
            z-index: 9999;
            cursor: pointer;
        }

        .drag_n_drop__form {
            height: 300px;
            width: 300px;
            background-color: #f2f2c5;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .drug_n_drop__input {
            text-align: center;
        }

        .droped_file {
            display: none;
        }
    </style>
</head>

<body>
    <p class="mouse_coordinates"></p>
    <p class="geoCoordinates"></p>
    <section id="main" class="main">
        <button class="to_up_btn" onclick="goToUp()">нагору</button>
        <div id="div_wrapper" class="div_wrapper">
            <div id="test__black_block" class="test__black_block"></div>
            <div id="test__black_block" class="test__black_block"></div>
            <div id="test__black_block" class="test__black_block"></div>
            <div id="test__black_block" class="test__black_block"></div>
            <div id="test__black_block" class="test__black_block"></div>
            <div id="test__red_block_hover" class="test__red_block_hover"></div>
            <div id="test__green_block_input" class="test__green_block_input"></div>
        </div>
        <div class="buttons">
            <button class="button__display_none" onclick="magicDisappear()">
                display NONE
            </button>
            <button class="button__JS_delete" onclick="magicDelete()">JS delete</button>
            <button class="button__class_hide" onclick="magicHide()">class hide</button>
        </div>
        <button class="button__restore_black_block" onclick="magicRestore()" onmouseenter="redBoxUp()"
            onmouseleave="redBoxHide()">restore box</button>
        <label for="selector">input selector id:</label>
        <input type="text" id="selector" class="selector" onchange="magicRestoreElement(this.value)"
            onfocus="greenRectUp()" oninput="greenRectHide()">
        <div id="yellow_box" class="yellow_box" onclick="showAlert(this)"></div>
        <label for="images">input link for image</label>
        <textarea id="images_link" name="images_link" rows="4" cols="100"></textarea>
        <input type="submit" value="Load images" onclick="addImageToPage()">
        <div contenteditable="true" class="editor_via_localStorage" oninput="saveChangesToStorage(this)">
            Натисни на мене і почни писати...
        </div>
        <div contenteditable="true" class="editor_via_cookie" oninput="setCookie(this.innerHTML)">
            Натисни на мене і почни писати...
        </div>
        <div contenteditable="true" class="editor_via_sessionStorage" oninput="saveChangesToStorage(this)">
            Натисни на мене і почни писати...
        </div>
        <div class="alert_block" onclick="callAlert(event)">
            <div class="inner_alert_block" onclick="callAlert(event)">
                <p> CLICK ME </p>
            </div>
        </div>
        <button class="show_advert" onclick="showAdvert()">РЕКЛАМА</button>
        <div class="advertising" onclick="closeAdvert()"></div>
        <form class="myForm"><input type="submit" value="GO"></form>
        <form class="drag_n_drop__form" ondragover="dragOverEvent(event)" ondragleave="dragLeaveEvent(event)"
            ondrop="dropEvent(event)">
            <input type="file" class="drug_n_drop__input" value="Send file" onchange="fileAdded(this)">
            <p class="droped_file"></p>
        </form>
    </section>
    <script>

        function fileAdded(element) {
            const droppedFiles = element.files;
            if (droppedFiles.length > 0) {
                let inputDnDElement = document.querySelector(".drug_n_drop__input");
                inputDnDElement.style.display = "none";
                let displayFileName = document.querySelector(".droped_file");
                displayFileName.style.display = "block";
                displayFileName.innerHTML = droppedFiles[0].name;
                inputDnDElement.parentElement.style.backgroundColor = "#adad11";
            }
        }

        function dropEvent(e) {
            e.preventDefault();
            const droppedFiles = e.dataTransfer.files;
            let inputDnDElement = document.querySelector(".drug_n_drop__input");
            if (droppedFiles.length > 0) {
                inputDnDElement.files = droppedFiles;
            }

            inputDnDElement.style.display = "none";
            let displayFileName = document.querySelector(".droped_file");
            displayFileName.style.display = "block";
            displayFileName.innerHTML = droppedFiles[0].name;
        }
        function dragLeaveEvent(e) {
            e.preventDefault();
            e.currentTarget.style.backgroundColor = "#f2f288";
        }
        function dragOverEvent(e) {
            e.preventDefault();
            e.currentTarget.style.backgroundColor = "#adad11";
        }

        document.querySelector(".myForm").addEventListener('submit', function (event) {
            event.preventDefault();
        });



        function showAdvert() {
            document.querySelector(".advertising").style.display = "block";
            document.body.style.overflow = "hidden";
        }
        function closeAdvert() {
            document.querySelector(".advertising").style.display = "none";
            document.body.style.overflow = "";
        }

        function callAlert(event) {
            event.stopPropagation();
            alert("u pushed the button!");
        }
        window.onscroll = function () { showToUpButton() };
        function showToUpButton() {
            document.querySelector(".to_up_btn").style.display = "block";
            document.querySelector(".to_up_btn").style.position = "fixed";
        }
        function goToUp() {
            window.scrollTo(0, 0);
        }
        window.addEventListener('DOMContentLoaded', () => {
            loadCahngesToTextFrames();
            checkCookie();
        });
        let defaultText = "Натисни на мене і почни писати...";
        /* block for localStorage and sessionStorage */
        function loadCahngesToTextFrames() {
            let savedLocalText = localStorage.getItem("newText");
            document.querySelector(".editor_via_localStorage").innerHTML = savedLocalText || defaultText;
            let savedSessionText = sessionStorage.getItem("newText");
            document.querySelector(".editor_via_sessionStorage").innerHTML = savedSessionText || defaultText;
        }
        function saveChangesToStorage(element) {
            let localEditor = document.querySelector(".editor_via_localStorage");
            let sessionEditor = document.querySelector(".editor_via_sessionStorage");
            if (element.innerHTML !== defaultText) {
                const storage = (element === localEditor) ? localStorage : sessionStorage;
                storage.setItem("newText", element.innerHTML);
            }
        }
        /* end of localStorage/sessionStorage block */

        /* block for cookies */
        function setCookie(cvalue) {
            const d = new Date();
            let exdays = 3;
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            let expires = "expires=" + d.toUTCString();
            document.cookie = "newText" + "=" + encodeURIComponent(cvalue) + ";" + expires + ";path=/";
        }
        function getCookie(name) {
            let matches = document.cookie.match(new RegExp(
                "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
            ));
            return matches ? decodeURIComponent(matches[1]) : undefined;
        }
        function checkCookie() {
            let user = getCookie("newText");
            if (user !== defaultText) {
                document.querySelector(".editor_via_cookie").innerHTML = user;
            }
        }
        /* end cookies block */


        /* block for mouseListener */
        document.body.addEventListener("mousemove", function (event) {
            mouseListener(event);
        });
        /* end of mouseListener block */

        function magicDisappear() {
            document.querySelectorAll(".test__black_block").forEach(item => { item.style.display = "none" });
        }
        function magicDelete() {
            document.querySelectorAll(".test__black_block").forEach(item => item.remove());
            // document.getElementById("test__black_block").remove();
        }
        function magicHide() {
            document.querySelectorAll(".test__black_block").forEach(item => item.className = "hidden");
            // document.getElementById("test__black_block").className = "hidden";
        }
        function magicRestore() {
            let mainDiv = document.getElementById("div_wrapper");
            let blackBox = document.querySelector(".test__black_block") || document.querySelector(".hidden");
            if (!blackBox) {
                for (let i = 0; i < 5; i++) {
                    blackBox = document.createElement("div"); blackBox.id = ("test__black_block");
                    blackBox.className = ("test__black_block"); blackBox.style.width = "100px"; blackBox.style.height = "100px";
                    blackBox.style.backgroundColor = "blue"; mainDiv.append(blackBox);
                }
            } else {
                let
                    isHiden = (blackBox.style.display === "none") || (blackBox.classList.contains("hidden")); if (isHiden) {
                        document.querySelectorAll(".hidden").forEach(item => item.className = "test__black_block");
                        document.querySelectorAll(".test__black_block").forEach(item => item.style.display = "");
                        document.getElementById("test__black_block").style.display = "";
                    } else {
                    magicDisappear();
                }
            }
        }
        function magicRestoreElement(value) {
            let inputElement = document.getElementById("selector");
            document.querySelectorAll("." + value).forEach(item => item.remove());
            inputElement.value = "";
        }
        function addImageToPage() {
            let mainSection = document.getElementById("main");
            let textArea = document.getElementById("images_link").value;
            if (textArea.length === 0) {
                alert("enter url of image");
                return;
            }
            let links = textArea.split('\n');
            links.forEach(item => {
                if (item.trim()) {
                    let image = document.createElement("img");
                    image.src = item;
                    image.alt = item;
                    image.style.width = "300px";
                    mainSection.append(image);
                }
            });
            document.getElementById("images_link").value = "";
        }

        function showAlert(element) {
            let isHelloMessage = element.getAttribute("onclick").includes("showAlert");
            if (isHelloMessage) {
                alert("Привіт");
                element.setAttribute("onclick", "hideBox(this)");
            } else {
                hideBox();
            }
        }
        function hideBox(element) {
            element.style.display = "none";
        }
        function redBoxUp() {
            document.getElementById("test__red_block_hover").style.display = "block";
        }
        function redBoxHide() {
            document.getElementById("test__red_block_hover").style.display = "none";
        }
        function greenRectUp() {
            document.getElementById("test__green_block_input").style.display = "block";
        }
        function greenRectHide() {
            document.getElementById("test__green_block_input").style.display = "none";
        }
        function mouseListener(event) {
            let mouseX = event.clientX;
            let mouseY = event.clientY;
            let language = navigator.language;
            let latitude =
                document.querySelector(".mouse_coordinates").innerHTML = "X: " + mouseX + ", Y: " + mouseY + "<br>" + language +
                "<br>";
        }

        /* start of geolocation block */
        // if (navigator.geolocation) {
        //     navigator.geolocation.getCurrentPosition(showPosition);
        // } else {
        //     document.querySelector(".geoCoordinates").innerHTML =
        //         "Geolocation is not supported by this browser.";
        // }

        // function showPosition(position) {
        //     document.querySelector(".geoCoordinates").innerHTML =
        //         "Ш: " + position.coords.latitude +
        //         ", Д: " + position.coords.longitude;
        // }
        /* end of geolocation block */

    </script>
</body>

</html>